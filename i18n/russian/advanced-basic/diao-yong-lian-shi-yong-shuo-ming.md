---
icon: route
---
# Инструкция по использованию цепочки вызовов


{% hint style="warning" %}
Этот документ переведен с китайского языка с помощью ИИ и еще не был проверен.
{% endhint %}




## Функциональные возможности

Цепочка вызовов (также известная как "trace") предоставляет пользователям возможность анализа диалогов, помогая отслеживать производительность моделей, базы знаний, MCP, веб-поиска и других компонентов во время диалога. Это инструмент наблюдаемости, реализованный на базе [OpenTelemetry](https://opentelemetry.io/docs/languages/js/). Он осуществляет сбор, хранение и обработку данных на клиентской стороне с последующей визуализацией, предоставляя количественную оценку для выявления проблем и оптимизации результатов.

Каждый диалог соответствует одному набору данных trace, который состоит из нескольких span. Каждый span соответствует логике обработки Cherry Studio, например: вызов сессии модели, обращение к MCP, запрос к базе знаний или выполнение веб-поиска. Trace отображается в виде древовидной структуры, где span являются узлами дерева. Основные данные включают время выполнения и количество использованных токенов, а в деталях span можно просмотреть конкретные входные и выходные данные.

<figure><img src="../.gitbook/assets/trace2.gif" alt=""><figcaption></figcaption></figure>

## Включение Trace

По умолчанию после установки Cherry Studio функция Trace скрыта. Для её активации перейдите в раздел "Настройки" → "Общие настройки" → "Режим разработчика", как показано на рисунке:

<figure><img src="../.gitbook/assets/image (84).png" alt=""><figcaption></figcaption></figure>

Записи Trace не создаются для предыдущих сессий — они формируются только после новых вопросов. Собранные данные хранятся локально. Для полной очистки Trace используйте: "Настройки" → "Настройки данных" → "Каталог данных" → "Очистить кеш". Также можно вручную удалить файлы в каталоге \~/.cherrystudio/trace, как показано ниже:

<figure><img src="../.gitbook/assets/image (85).png" alt=""><figcaption></figcaption></figure>

## Сценарии использования

### Просмотр полной цепочки

Нажмите на значок цепочки вызовов в диалоговом окне Cherry Studio, чтобы просмотреть данные всей цепочки. Независимо от того, вызывались ли модели, веб-поиск, базы знаний или MCP во время диалога, в окне цепочки вызовов отобразятся все этапы обработки.

<figure><img src="../.gitbook/assets/image (1).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (86).png" alt=""><figcaption></figcaption></figure>

### Анализ моделей в цепочке

Для просмотра деталей вызова модели в цепочке, щёлкните на узле вызова модели. Вы увидите подробности входных и выходных данных.

<figure><img src="../.gitbook/assets/image (87).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (88).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (89).png" alt=""><figcaption></figcaption></figure>

### Анализ веб-поиска в цепочке

Для изучения деталей веб-поиска в цепочке щёлкните на узле поиска. В деталях отобразятся запрошенный вопрос и полученные результаты.

<figure><img src="../.gitbook/assets/image (2).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (150).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (151).png" alt=""><figcaption></figcaption></figure>

### Анализ базы знаний в цепочке

Для просмотра деталей обращения к базе знаний щёлкните на соответствующем узле. Детализация покажет запрошенный вопрос и полученный ответ.

<figure><img src="../.gitbook/assets/image (152).png" alt=""><figcaption></figcaption></figure>

### Анализ вызовов MCP

Для изучения MCP-вызовов в цепочке щёлкните на узле MCP. В деталях отобразятся входные параметры вызова и результат работы инструмента.

<figure><img src="../.gitbook/assets/image (153).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../.gitbook/assets/image (154).png" alt=""><figcaption></figcaption></figure>

## Проблемы и предложения

Данный функционал предоставлен командой Alibaba Cloud [EDAS](https://www.aliyun.com/product/edas). По вопросам и предложениям вступайте в группу DingTalk (ID: 21958624) для связи с разработчиками.

\